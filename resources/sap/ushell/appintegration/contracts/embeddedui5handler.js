// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/EventBus","sap/ushell/appIntegration/ApplicationContainerCache","sap/ushell/Container","sap/ushell/UI5ComponentType","sap/ushell/utils","sap/ushell/utils/UrlParsing"],(e,t,n,i,o,s)=>{"use strict";class a{async createApp(e,o,a){t.forEach(t=>{if(t===e){return}if(t.isA("sap.ushell.appIntegration.UI5ApplicationContainer")){t.stopRouter()}});const p=await n.getServiceAsync("Ui5ComponentLoader");const r=s.constructBasicHash(a);o.ui5ComponentId=`application-${r}-component`;e.setUi5ComponentId(o.ui5ComponentId);await p.createComponent(o,[],i.Application)}async getNavigationRedirectHash(e){const t=e.getComponentHandle();if(!t){return}const n=t.getInstance({});if(!n){return}if(typeof n.navigationRedirect!=="function"){return}const i=n.navigationRedirect();if(!i||typeof i.then!=="function"){return}try{const e=await o.promisify(i);return e}catch{}}async storeApp(t){const n=t.getCurrentAppTargetResolution();e.getInstance().publish("sap.ushell","appKeepAliveDeactivate",n);const i=t.getComponentHandle();const o=i.getInstance();if(o.isKeepAliveSupported?.()){o.deactivate();return}if(typeof o.suspend==="function"){o.suspend()}const s=o.getRouter?.();if(s&&typeof s.stop==="function"){s.stop()}}async restoreAppAfterNavigate(t,n){const i=t.getCurrentAppTargetResolution();e.getInstance().publish("sap.ushell","appKeepAliveActivate",i);const o=t.getComponentHandle();const s=o.getInstance();if(s.isKeepAliveSupported?.()){s.activate();return}if(typeof s.restore==="function"){s.restore()}const a=s.getRouter?.();if(a&&typeof a.initialize==="function"){const e=!n.useLegacyRestoreFlow;a.initialize(e)}}}return new a});
//# sourceMappingURL=EmbeddedUI5Handler.js.map