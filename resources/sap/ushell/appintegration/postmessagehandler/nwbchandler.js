// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/deepClone","sap/base/util/uid","sap/ushell/appIntegration/PostMessageManager","sap/ushell/Container","sap/ushell/utils"],(e,t,s,a,r,o)=>{"use strict";const i=[(e,a)=>{if(a.action==="pro54_setGlobalDirty"){const r=t(a);r.service="sap.ushell.appIntegration.PostMessageManager.NWBCHandler.pro54_setGlobalDirty";delete r.action;r.body=r.parameters;delete r.parameters;if(!r.request_id){r.request_id=s()}if(!r.type){r.type="request"}const o=new MessageEvent("message",{data:JSON.stringify(r),origin:e.origin,source:e.source});return{event:o,message:r}}}];const n={};const l={"sap.ushell.appIntegration.PostMessageManager.NWBCHandler.pro54_setGlobalDirty":{async handler(t,s,a){const i=s.getNwbcDirtyStorageKey();if(localStorage.getItem(i)===r.DirtyState.PENDING){e.debug(`getGlobalDirty() pro54_setGlobalDirty SetItem key:${i} value: ${t.globalDirty}`,null,"sap.ushell.appIntegration.ApplicationContainer");o.localStorageSetItem(i,t.globalDirty,true)}},options:{provideApplicationContext:true}}};return{register(){i.forEach(e=>{a.addEventPreprocessor(e)});Object.keys(n).forEach(e=>{const t=n[e];a.setDistributionPolicy(e,t)});Object.keys(l).forEach(e=>{const t=l[e];a.setRequestHandler(e,t.handler,t.options)})}}});
//# sourceMappingURL=NWBCHandler.js.map